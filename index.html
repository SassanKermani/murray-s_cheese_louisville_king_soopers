<!DOCTYPE html>
<html>
<head>
	<title></title>

	<style type="text/css">
		
		body{
			display: block;
			margin: 0;
			background-image: url("./img/murrays-background.png");
			background-repeat: repeat;
		}

		#userinput{
			background-color: #ffffff;
			border: solid #c82e29 5px;

			position: fixed;
			top: 1vh;
			margin-left: 4vw;
			
			width: 92vw;
			height: 5vh;
			text-align: center;
			font-size: 4em;
		}

		#padding{
			width: 100vw;
			height: 9vh;

			/*background-color: green;*/
		}

		.cheese_List_item{
			border: solid #c82e29 5px;
			background-color: #fafafa;
			margin: 2.5vw 0vh 2.5vw 0vh;
			padding: 1% 1% 1% 1%;
			border-radius: 1%;

			/*grid*/
			display: grid;
			grid-template-columns: 1fr 7fr;
			grid-gap: 1vw;
		}

		.cheese_List_text{
			font-size: 2em;
		}

		.logo{
			width: 10vh;
			height: 10vh;
			/*border: solid black 3px;*/
			display: inline;
		}

		#cheseVeiw{
			position: fixed;
			left: 0px;
			width: 100vw;
			top: 0px;
			height: 100vh;
			background-color: white;
			font-size: 3em;
			padding: 1% 1% 1% 1%;
		}

	</style>
</head>
<body>

	<input id="userinput" type="text" value="search">
	<div id="padding"></div>
	<div id="cheese_List">
		
	</div>
	<!-- <button>add new chese</button> -->
	<div id="cheseVeiw" hidden="">

	<script type="text/javascript" src="parse.min.js"></script>
	<script type="text/javascript">
		
		Parse.serverURL = 'https://parseapi.back4app.com'; // This is your Server URL
		Parse.initialize(
			'XAtO6JpDbkGEMltXomNHrqPhL71vEFO5OzcMFJvr', // This is your Application ID
			'DD63SPONUrTFHtjdy6kHNNjCtUKHw3GB1X5NzPy3' // This is your Javascript key
		);
		const CheeseClass = Parse.Object.extend('cheese');

		let cheseListText = [];
		let cheseList;

		/*===================================
		=            GET FROM DB            =
		===================================*/
		
		const query = new Parse.Query(CheeseClass);
		query.find().then(
			(results) => {
				if (typeof document !== 'undefined'){
					// document.write(`ParseObjects found: ${JSON.stringify(results)}`);

					cheseList = results;

					cheseList.map((i, index)=>{
						drawCheese(i);
						cheseListText[index] = `${i.get("producer")} : ${i.get(`itemName`)} : ${i.get(`plu`)}`;
					})

				}
				// console.log('ParseObjects found:', results);
			}, (error) => {
				if (typeof document !== 'undefined'){
					// document.write(`Error while fetching ParseObjects: ${JSON.stringify(error)}`);
				}
				console.error('Error while fetching ParseObjects', error);
			}
		);

		/*=====  End of GET FROM DB  ======*/
		
		/*==================================
		=            drawCheese            =
		==================================*/

		function drawCheese(cheeseIteam){

			let div = document.createElement(`div`);
			div.classList.add(`cheese_List_item`);

			div.addEventListener(`click`, ()=>{

				console.log(`DID THE THING`)

				document.getElementById(`cheseVeiw`).removeAttribute(`hidden`);
				document.getElementById(`cheseVeiw`).innerHTML = ``;
				document.getElementById(`cheseVeiw`).innerHTML = `

					<p> ${cheeseIteam.get("producer")} </p>
					<p> ${cheeseIteam.get("itemName")} </p>
					<p> ${cheeseIteam.get("plu")} </p>
					<p> ${cheeseIteam.get("cutStyle")} </p>
					<p> ${cheeseIteam.get("whole")} </p>
					<p> ${cheeseIteam.get("halfQtr")} </p>
					<p> ${cheeseIteam.get("cut")} </p>
					<p> ${cheeseIteam.get("family")} </p>

				`;
			})

			document.getElementById(`cheese_List`).appendChild(div);

			let img = document.createElement(`img`);
			img.classList.add(`logo`);

			switch(true){
				case(cheeseIteam.get("producer") == `Murray's`):
				 	img.src = `img/Murray's_Cheese-Logo.wine.png`;
				 	break;
				case(cheeseIteam.get("producer") == `Alta Langa`):
				 	img.src = `img/Murray's_Cheese-Logo.wine.png`;
				 	break;
				case(cheeseIteam.get("producer") == `Supreme`):
					img.src = `img/supremeCheese.png`;
					break;
				case(cheeseIteam.get("producer") == `Lactalis`):
					img.src = `img/lactalisCheeseLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Fromagerie Guilloteau`):
					img.src = `img/FromagerieGuilloteauLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Cypress Grove`):
					img.src = `img/CypressGrove.png`;
					break;
				case(cheeseIteam.get("producer") == `Cowgirl Creamery`):
					img.src = `img/cowgirlCreamery.png`;
					break;
				case(cheeseIteam.get("producer") == `Belletoile`):
					img.src = `img/belletoileLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Point Reyes`):
					img.src = `img/pointreyes.png`;
					break;
				case(cheeseIteam.get("producer") == `Black River`):
					img.src = `img/BlackRiverLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Roth Kase`):
					img.src = `img/rothkase.png`;
					break;
				case(cheeseIteam.get("producer") == `Champignon`):
					img.src = `img/champignonLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Kerrygold`):
					img.src = `img/kerrygoldLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Rogue Creamery`):
					img.src = `img/rogueCreameryLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Ciresa`):
					img.src = `img/ciresaLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `CIRESA`):
					img.src = `img/ciresaLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Salemville®`):
					img.src = `img/Salemville®Logo.png`;
					break;
				case(cheeseIteam.get("producer") == `Beehive Cheese Company`):
					img.src = `img/BeehiveCheeseCompanyLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Beehive`):
					img.src = `img/BeehiveCheeseCompanyLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Beehive Cheese`):
					img.src = `img/BeehiveCheeseCompanyLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Cellars At Jasper Hill`):
					img.src = `img/CellarsAtJasperHillLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `SOMERDALE`):
					img.src = `img/SOMERDALELogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Somerdale`):
					img.src = `img/SOMERDALELogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Spring Green`):
					img.src = `img/SpringGreenLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Old Croc`):
					img.src = `img/OldCrocLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Mrs. Quicke's`):
					img.src = `img/Mrs.Quicke'sLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Beecher's Handmade Cheese`):
					img.src = `img/Beecher'sHandmadeCheeseLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Westminster`):
					img.src = `img/WestminsterLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Rocking W`):
					img.src = `img/RockingWLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Belgioioso`):
					img.src = `img/BelgioiosoLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Long Clawson`):
					img.src = `img/LongClawsonLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Cello`):
					img.src = `img/CelloLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Cello Cheese`):
					img.src = `img/CelloLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Maple Leaf`):
					img.src = `img/MapleLeafLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `New Bridge`):
					img.src = `img/NewBridgeLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Parrano`):
					img.src = `img/ParranoLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Parrano`):
					img.src = `img/ParranoLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Kaamps`):
					img.src = `img/KaampsLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Rembrandt`):
					img.src = `img/RembrandtLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Brugge`):
					img.src = `img/BruggeLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Frans Hals`):
					img.src = `img/FransHalsLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Holland's Family Cheese`):
					img.src = `img/Holland'sFamilyCheeseLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Thise Dairy`):
					img.src = `img/ThiseDairyLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Sartori`):
					img.src = `img/SartoriLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Kaseri Studer`):
					img.src = `img/KaseriStuderLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Emmi`):
					img.src = `img/EmmiLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Mitica`):
					img.src = `img/MiticaLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Hofkäserei Kraus`):
					img.src = `img/HofkäsereiKrausLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Haystack Mountain`):
					img.src = `img/HaystackMountainLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Isigny`):
					img.src = `img/IsignyLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Uplands Farm`): 			//GET THIS LOG LATTER GHA 
					img.src = `img/UplandsFarmLogo.png`;
					break;
				case(cheeseIteam.get("producer") == `Spring Brook Farm`):
					img.src = `img/SpringBrookFarmLogo.png`;
					break;	
			}

			div.appendChild(img);

			let span = document.createElement(`span`);
			span.classList.add(`cheese_List_text`)
			span.innerHTML = `${cheeseIteam.get("producer")} : ${cheeseIteam.get(`itemName`)} : ${cheeseIteam.get(`plu`)}`;
			div.appendChild(span);
		}

		/*=====  End of drawCheese  ======*/

		/*==============================
		=            Search            =
		==============================*/
		
		let userinput = `search`;
		document.addEventListener(`keyup`, (event)=>{
			if(userinput != document.getElementById(`userinput`).value){
				startSearch(document.getElementById(`userinput`).value);
			}
		})

		let delayTimer;

		function startSearch(text) {
			clearTimeout(delayTimer);
				delayTimer = setTimeout(function() {
					doSearch(text)
			}, 1000);
		}

		function doSearch(text){

			// console.log(`/*----------  DID doSearch  ----------*/`)
			console.log(`${text}`);

			document.getElementById(`cheese_List`).innerHTML = ``;

			if(text != `` | text != ` `| text != `search`){
				cheseList.map((i, index)=>{
					if(cheseListText[index].toLowerCase().includes(text.toLowerCase())){
						drawCheese(i);
					}
				})
			}
		}
		
		/*=====  End of Search  ======*/
		
		document.getElementById(`cheseVeiw`).addEventListener(`click`, ()=>{
			document.getElementById(`cheseVeiw`).hidden = true;
		})

	</script>

</body>
</html>